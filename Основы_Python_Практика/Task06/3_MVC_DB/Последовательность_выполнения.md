# Последовательность выполнения работы  

## Создаем базу данных из CSV  
- Открываем SQL Shell (psql)  
- Создаем базу  

```
CREATE DATABASE zip;
```

- Переходим в базу  

```
\c zip
```

- Создаем таблицу с параметрами  

```
CREATE TABLE zip_codes (
zip_code CHAR(5),
latitude float,
longitude float,
city VARCHAR(255),
state CHAR(2),
county VARCHAR(255),
PRIMARY KEY (zip_code)
);
```

- Посмотреть наличие таблицы  

```
\d
```

- Открываем пустую таблицу  

```
SELECT * FROM zip_codes;
```

- заполняем таблицу из файла CSV

```
COPY zip_codes(zip_code, latitude, longitude, city, state, county)
FROM 'D:\<Путь к файлу>\zip_codes_states.csv'
DELIMITER ','
CSV HEADER;
```

> COPY копируем в таблицу zip_codes (порядок очередности полей)  
> FROM из файла zip_codes_states.csv  
> DELIMITER разделитель ','  
> CSV HEADER заголовок проигнорирован.  

---

## Создание виртуальной среды venv (опционально)  
- Создали папку (каталог проекта) в которой будет виртуальная среда  
- В командную строке перешли в созданый каталог.  
- Запустили модуль venv:

```
python -m venv venv
```

- Активация виртуальной среды:

```
.\venv\Scripts\activate.bat
```

---

##

---

## Последовательность работы с БД

### PgSQL

1. Импортировать пакет  

	```python
	```

2. Открыть подключение  

	```python
	```

3. Создать курсор  

	```python
	```

4. Выполнить запрос  

	```python
	```

5. Обработать записи результирующего набора данных  

	```python
	```

6. Закрыть подключение и очистить среду от ненужных объектов  

	```python
	```

---

### MySQL

1. Импортировать пакет  
	
	```python
	import mysql.connector
	```

	или  

	```python
	import mysql.connector as SQLCon
	```

2. Открыть подключение  

	```python
	mycon = mysql.connector.connect(
	host = 'localhost',
	database = 'mysql',
	user = 'root',
	password = ''
	)

	if mycon.is_connected(): # проверка подключения
	print("Успешное подключение!")
	```

3. Создать курсор  

	Курсор обеспечивает однонаправленную построчную обработку записей результирующего набора данных (записей, полученных из БД в результате запроса)

	```python
	emp_cursor = mycon.cursor()
	```

4. Выполнить запрос  

	```python
	emp_cursor.execute("SELECT * FROM emp")
	```

	Дополнительно можно:  
		- Вызвать хранимую процедуру (.callproc())  

		```python
		result_proc = emp_cursor.callproc('proc_name', [a, b, 0, 0])
		```

		- Выполнить запрос с несколькоми SELECT (.nextset())  

		```python
		query = """
		SELECT * FROM table1;
		SELECT * FROM table2;
		"""

		emp_cursor.execute(query)

		# Обработка первого набора результатов
		print("Результаты из table1:")
		for row in emp_cursor:
		print(row)

		# Переход к следующему набору результатов
		emp_cursor.nextset()

		# Обработка второго набора результатов
		print("Результаты из table2:")
		for row in emp_cursor:
		print(row)
		```

5. Обработать записи результирующего набора данных  

	Обработка первой строки результата  
	```python
	emp_cursor.fetchone()
	```

	Задать, сколько строк результата необходимо обработать  
	```python
	emp_cursor.fetcmany(n)
	```

	Обработка всех строк результата  
	```python
	emp_cursor.fetchall()
	```

6. Закрыть подключение и очистить среду от ненужных объектов  

	```python
	# Закрытие курсора и соединения

	emp_cursor.close()

	mycon.close()
	```