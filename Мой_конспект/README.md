# Синтаксис Python

## Основная часть программы

```python
if __name__ == "__main__":
```

---

## Комментарии 

```python
#Однострочный в spider Ctrl+1 в PyCharm Ctrl+/ в Notepad++ Ctrl+q

'''
Многострочный
'''

"""
Многострочный
"""
```

---

## Переменные

В python все, это объекты

### Типы данных

```python
a=2 #class 'int'
b='2' #class 'str'
c=2.0 #class 'float'
d=True # class 'bool'
	#значения типа могут принимать: True (истина) или False (ложь).
	#преобразовать логическое к типу int, то True = 1, а False = 0.
	#обратное преобразование 0 = False, а не=0 = True.
	#преобразовать логическое к типу str, то пустая "" = False, а непустая "*" = True.
```

---

### Объявление константы 

Константа записывается заглавными буквами с нижним подчеркиванием вместо пробелов 

Записываются в начале кода, после импорта модулей

Пример:

```python
SECS_IN_MIN = 60
```

---

### Определить тип

Определить тип объекта можно при помощи функции type:

```python
type(a)
type(b)
type(c)

print(type(a))
print(type(b))
print(type(c))
```

---

### Определить идентификатор объекта (хэш код)

Cтрока, характеризующая размещение объекта в памяти

Могут быть разные переменные, но указывать на один объект (один хэш). Эти переменные называться алиасы

```python
id(a)
print(id(b))
```

---

## Операции с переменными

### Ввод переменных

input всегда возвращает строку (str)

```python
s1 = Input()
s2 = input("Подсказка пользователю, что необходимо ввести:")
```

---

### Преобразование типов данных

```python
num1=input(Введите число: ) #input принимает значение как строку
num1=int(num1) #преобразуем в числовое значение
```

```python
int(12.4) #Преобразовывает в целое число -> 12
# long(20) #Преобразовывает в long Python 2.x -> 20L
float(10) #Преобразовывает в число с плавающей точкой -> 10.0
complex(20) #Создает комплексное число -> (20+0j)
str(10) #Преобразовывает в строку -> '10'
tuple("hello") #Преобразовывает в кортеж -> ( "h","e","l","l","o" )
list("Python") #Преобразовывает в список -> [ "P","y","t","h","o","n" ]
dict( [ (1,2), (3,4) ] ) #Создает словарь -> { 1:2, 3:4 }
```

---

### Вывод переменных

```python
str1="Hello "
str2='World'

print(str1) #Hello
print("\"") #напишет ковычки "
print ("One \nTwo \nThree") #каждое слово с новой строки 
# f строки -вывод значений переменных в {}
print(f"Итог: {str1}{str2}\n")  #Итог: Hello World
# r строки -вывод строки как есть, игнорируя \ и спецсимволы 
print(r"Итог: {str1}{str2}\n") #Итог: {str1}{str2}\n
print("""Многострочный текст
учитывает все переносы
в одном предложении""")
```

---

### Удаление переменной

```python
del a
```

---

### Операции с числами

```python
a=9
b=3

a+b #сумма
a-b #разность
a*b #произведение
a/b #частное, ответ будет типа Float
a**b #возведение в степень
a**0.5 # квадратный корень из a
a**(1/b) #корень степени b
a//b # целочисленное деление
a%b # остаток от деления
-a #унарный минус

# 1+2*3**1+1 = 8  сначала выполняется возведение в степень, затем умножение, затем сложение.
# 3**3**3 = 3²⁷ возведения в степень справа налево
```

---

### Операции с числами модуль math

```python
import math #импорт модуля
print(math.pi) #обращение к модулю, вывод 3.141592653589793
```

```python
import math as m #импорт модуля и присваивание ему имени „m”
print(m.pi) #обращение к модулю, вывод 3.141592653589793
```

```python
from math import pi #импорт только pi из модуля math (можно через запятую импортировать несколько или указать *, как все)
print(pi) 
```

```python
#Тригонометрические функции:
x = 0.5 # x - радины
math.sin(x) #вычисляет синус
math.cos(x) #вычисляет косинус
math.tan(x) #вычисляет тангенс
math.asin(x) #вычисляет арксинус
math.acos(x) #вычисляет арккосинус
math.atan(x) #вычисляет арктангенс

#Гиперболические функции:
math.sinh(x) #гиперболический синус
math.cosh(x) #гиперболический косинус
math.tanh(x) #гиперболический тангенс
#обратные гиперболические функции
math.asinh(x)
math.acosh(1) 
math.atanh(x)

#Экспоненциальные и логарифмические функции:
y = 3
math.exp(x) #число Эйлера в степени x

math.log(x) # Натуральный логарифм числа x (основание 'e' по умолчанию)
math.log(x, y) # логарифм числа x по основанию y
math.log10(x) # десятичный логарифм числа x
math.log2(x) # логарифм по основанию 2 числа x
    
#Функции для работы с квадратными корнями:
math.sqrt(x) #квадратный корень из числа

math.pow(x, y) #x в степени y

#Функции для работы с числами с плавающей запятой:
math.ceil(x) #округление вверх
math.floor(x) #округление вниз
math.trunc(x) # отбрасывание дробной части, округление к нулю
math.fabs(x) # абсолютное значение числа x

#Функции для вычисления факториала и двойного факториала:
math.factorial(3) #факториал числа x
math.gamma(x) # гамма-функция числа x (аналогична факториалу для нецелых чисел)
math.lgamma(x) # натуральный логарифм модуля гамма-функции числа x

#Функции для работы с комплексными числами
math.isinf(x) # проверяет, является ли x бесконечностью
math.isnan(x) # проверяет, является ли x NaN (Not a Number)

#Константы:    
math.pi #константа, Пи
math.e #константа, число Эйлера
```

---

### Операции над строками

```python
string1 = 'This is a string.'
string2 = " This is another string."
a=2

con=string1+string2 #конкатенация 

string1*a #реплицирование. повторение a раз, значение a должно быть целого типа. 

print(len(string1)) #len() - определяет длину строки;
print(string1.title()) #title() - преобразует первый символ каждого слова в строке к верхнему регистру;L
print(string1.lower()) #lower() - символы строки преобразуются к нижнему регистру;
print(string1.upper()) #upper() - символы строки преобразуются к верхнему регистру;
print(string1.capitalize()) #capitalize() - первый символ строки в заглавную букву, а остальные символы в строчные
print(string1.find("k")) #find("0") - проверяет, присутствует ли символ указывает индекс, -1 отсутствует
print(string1.rstrip()) #rstrip() – удаляются пробелы в конце строки;
print(string1.lstrip()) #lstrip() – удаляются пробелы в начале строки;
print(string1.strip()) #strip() - удаляются пробелы с обоих концов;
print(string1.strip('T')) #strip('0') - удаляются с обоих концов указанные символы в параметре функции.

print(string1[2]) # извлекается символ ‘i’
print(string1[1:3]) # извлекаются символы ‘hi’. срез(slicing) варианты: string1[1:], string1[:3], string1[:], string1[1:5:2] 
```

---

## Списки (list)

```python
list1 = []
list1 = ['Hello', 5, 8.2, True]
list1 = [82,8,23,97,92,44,17,39,11,12]
print(len(list1)) #len() - определяет длину списка;
print(list1[1]) # вывод символа индекса [1]. вывод 8
list1.insert(3,20) #  вставляет элемент 20 в список по указанному 3
list1.append(6) # добавляет элемент в конец списка
list1.pop(1) # Удаляет элемент с индексом 1
list1.remove(8) # удаляет первое вхождение указанного элемента из списка (удалит число 8). Не найден, метод вызывает исключение ValueError.
list1.reverse() # меняет порядок элементов в списке на обратный
list1.sort() # сортирует в порядке возрастания. Список содержит строки, будут отсортированы в лексикографическом порядке.
list1.clear() #очистить весь список.

list2 = [3,5,6,2,33,6,11]
lis = sorted(list2) # сортирует в порядке возрастания не меняя исходный список.
print(lis) # выводит: [2, 3, 5, 6, 6, 11, 33]
print(' '.join(map(str, lis))) # выводит: 2 3 5 6 6 11 33
```

Распаковка списка

```python
my_list = [1, 2, 3]
x, y, z = my_list
print(x) # 1
print(y) # 2
print(z) # 3

a, b, *c, d = [1, 2, 3, 4, 5, 6, 7, 8, 9]
print(a) # 1
print(b) # 2
print(c) # [3, 4, 5, 6, 7, 8]
print(d) # 9
```

Удобный способ создания списков, содержимое которых подчиняется правилу

```python
cubes = [i**3 for i in range(5)] # создает список [0, 1, 8, 27, 64]
nums = [i*2 for i in range(10)] # создает список 10 четных [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
evens = [i*2 for i in range(10) if i**2 % 2 == 0] # создает список [0, 4, 8, 12, 16]
```

---

## Срезы

(0) __[0||-4]__ (1) __[1||-3]__ (2) __[2||-2]__ (3) __[3||-1]__ (4)

Начальный индекс включается. Конечный индекс исключается.

```python
animals = ["cat", "dog", "bird", "cow"]
print(animals[1:3]) # ['dog', 'bird'] с индекса 1, без индекса 3
print(animals[:3]) # ['cat', 'dog', 'bird'] с первого элемента [0], без [3]
print(animals[1:]) # ['dog', 'bird', 'cow'] с индекса 1, до последнего элемента
print(animals[-2]) # bird Предпоследний элемент
print(animals[-3:]) # ['dog', 'bird', 'cow'] последние 3 элемента
print(animals[-3:-1]) # ['dog', 'bird'] с индекса [-3], без индекса [-1]
```

---

## Кортежи (tuple)

Последовательность данных, которые невозможно изменить.

```python
seq = (2,8,23,97,92,44,17,39,11,12)
print(seq.count(8)) # возвращает количество вхождений указанного значения
print(seq.index(44)) # возвращает индекс первого вхождения указанного значения
listseq = list(seq) # Преобразует кортеж к типу «список»
print(type(listseq)) # Выводит <class 'list'>
```

Распаковка кортежа

```python
my_tuple = (1, 2, 3)
x, y, z = my_tuple
print(x) # 1
print(y) # 2
print(z) # 3

a, b, *c, d = (1, 2, 3, 4, 5, 6, 7, 8, 9)
print(a) # 1
print(b) # 2
print(c) # [3, 4, 5, 6, 7, 8]
print(d) # 9
```

---

## Словари (dict)

Любой объект Python, может стать значением в словаре.

```python
D = {
     'food': 'Apple', 
     'quantity': 4, 
     'color': 'Red',
     }

print(D['food']) # Выводит значение Apple, по ключу food
D['quantity']+=10 # Добавляет значению 4+10, по ключу quantity
print(D['quantity'])  # Выводит значение 14, по ключу quantity
     
# in, not in Проверка наличия ключа в словаре
print('color' in D) # True ключ color присутствует в словаре D
print(4 not in D) # True ключ 4 отсутствует в словаре D

# Функция get если ключ не представлен в словаре / списке, возвращает другое указанное значение
print(D.get(4)) # None
print(D.get(4, "not found")) # not found
print(D.get('food', "not found")) # Apple
```

Пример:

```python
dp = {} # пустой словарь
count = int(input("Количество записей: "))
for i in range(count):
    name = input("Имя "+str(i+1)+": ")
    age = int(input("Возраст "+str(i+1)+": "))
    dp[name] = age
print(dp)
```

Пример Вложенность хранения данных:

```python
rec = {'name': {'firstname': 'Bob', 'lastname': 'Smith'},
       'job': ['dev', 'mgr'],
       'age': 25}
rec['job'].append('janitor') # добавляем в список должностей
# print(rec)
print("Имя: "+rec['name']['firstname'])
print("Фамилия: "+rec['name']['lastname'])
print("Возраст: "+str(rec['age']))
print("Должности: "+' '.join(rec['job']))
```

---

## Множества (set)

Множества неупорядочены, они не могут быть проиндексированы

```python
a = {1, 2, 3, 4, 5, 6}
b = {4, 5, 6, 7, 8, 9}

a.add(7) # {1, 2, 3, 4, 5, 6, 7} добавление новых элементов. Дублирующиеся автоматически удаляются
a.remove(7) # {1, 2, 3, 4, 5, 6} удаление конкретного элемента

print(3 in a) # True 3 присутствует в множестве a
print(3 not in b) # True 3 отсутствует в множестве b

print(a | b) # {1, 2, 3, 4, 5, 6, 7, 8, 9} Оператор объединения | соединяет два множества
print(a & b) # {4, 5, 6} Оператор пересечения & получает элементы, которые есть в обоих множествах
print(a - b) # {1, 2, 3} Оператор разности - получает элементы, которые есть в первом множестве, но которых нет во втором
print(b - a) # {8, 9, 7}
print(a ^ b) # {1, 2, 3, 7, 8, 9} Оператор симметричной разности ^ получает элементы, которые есть либо в одном множестве, либо в другом, но не в обоих сразу
```

---

## Логика

### Операторы сравнения

```
<	Меньше — условие верно, если первый операнд меньше второго.
>	Больше — условие верно, если первый операнд больше второго.
<=	Меньше или равно — условие верно, если первый операнд меньше или равен второму.
>=	Больше или равно — условие верно, если первый операнд больше или равен второму.
==	Равенство. Условие верно, если два операнда равны.
!=	Не равно.
```

Пример:

```python
(x * x < 1000)
(2 * x != y)
(a == b == c)
(1 <= x <= 10)
```

Пример сравнения переменных:

```python
s1 = "Hello"
so = "o"
s2 = "Hell" + so
s3 = "Hell" + "o"

print(f"s1 и s2. Сравнение содержимого: {s1 == s2}\n") #True
print(f"s1 и s2. Сравнение объектов по ссылке: {s1 is s2}\n") #False эквивалентно id(s1)==id(s2)
print(f"s1 и s3. Сравнение содержимого: {s1 == s3}\n") #True
print(f"s1 и s3. Сравнение объектов по ссылке: {s1 is s3}\n") #True эквивалентно id(s1)==id(s3)
```

---

### Логические операторы

```
and
or
not
```

---

### Ветвление

```
if Условие:
    Блок_инструкций_1 (или pass пустой оператор)	
else:
    Блок_инструкций_2 (или pass пустой оператор)
```
	
Блок_инструкций_1 будет выполнен, если Условие истинно. Если Условие ложно, будет выполнен Блок_инструкций_2.

Пример:

```python
x=-5
if x < 0:
    x = -x
print(x)
```

---

### Каскадные условные инструкции if... elif... else:

```python
print('введите координату x:')
x = int(input())
print('введите координату y:')
y = int(input())
if x > 0 and y > 0:
    print("Первая четверть")
elif x > 0 and y < 0:
    print("Четвертая четверть")
elif y > 0:
    print("Вторая четверть")
else:
    print("Третья четверть")
```
	
Условия if, ..., elif проверяются по очереди. Если все ложны, выполняется else

---

### Цикл while «пока»

```
while Условие:
    Блок_инструкций (или pass пустой оператор)
```

Пока условие истинно выполняется инструкция

Пример:

```python
a = 1
n = 10
while a <= n:
    print(a)
    a += 1
```

---

### Цикл for 

Краткая альтернатива циклу while

Пример 1:

```python
for i in range(10):
   print(i)
   
#соответствуют циклу while:
i = 0
while i < 10:
  print(i)
  i += 1
```

Пример 2 (start, stop, step):

```python
for i in range(20, 10, -2):
	print(i)
	
#соответствуют циклу while:
i = 20
while i > 10:
  print(i)
  i -= 2
```

---

## Функции

Функции — это готовые кирпичики, из которых строится программа.

Стандартные функции (print, input, функции модуля turtle)

```
def Имя_функции(параметр_1, параметр_2, ...):
    Блок_операций (или pass пустой оператор)
```

Пример не возвращает результат:

```python
def hello(name): #функция не возвращает результат (выводит текст на экран)
    print('Hello, ', name, '!') #тело функции

hello('world') #Вызов функции
```

Пример возвращает результат:

```python
def sum(a, b): #функция возвращает результат (оператор return)
    return a + b

sum(1, 2) #возвращает значение 3
sum(5, -7) #возвращает значение -2
```

---

### Спецификация функции

Для читаемости и объяснения работы функции делается спецификация.

После объявления функции набрать """ и Enter. Будет создан шаблон спецификации.

Пример:

```python
def sum(a, b): 
    '''
    Parameters
    ----------
    a : TYPE
        DESCRIPTION.
    b : TYPE
        DESCRIPTION.

    Returns
    -------
    TYPE
        DESCRIPTION.
    '''
    return a + b
```

---

### Лямбда (ананимные) функции

```python
# Лямбда функция
print((lambda x: x**2 + 5*x + 4) (-4))

# Аналог именной функции
def polynomial(x):
    return x**2 + 5*x + 4
print(polynomial(-4))
```

Пример передачи лямбда функции

```python
def my_func(f, arg): # принимает f = lambda x: 2*x*x, arg = 5
  return f(arg) # возвращает (lambda x: 2*x*x)(5) => 2*5*5 = 50

lam = my_func(lambda x: 2*x*x, 5)
print(lam) # 50
```

---

### Функция map

Функция для работы со списками или подобными объектами

Пример с передачей в функцию каждого аргумента списка

```python
def add_three(x):
    return x + 3

nums = [10, 15, 20, 25]
result = list(map(add_three, nums))
print(result) # [13, 18, 23, 28]
```

Пример с использованием lambda

```python
nums = [10, 15, 20, 25]
result = list(map(lambda x: x + 3, nums))
print(result) # [13, 18, 23, 28]
```

---

### Функция filter

Функция для работы со списками или подобными объектами

Фильтрует итерируемый объект, оставляя только элементы, которые соответствуют условию

```python
nums = [10, 15, 20, 25]
result = list(filter(lambda x: x%2==0, nums))
print(result) # [10, 20]
```

---

### Декораторы

Функции которые расширяют функциональность функций, которые не хотите изменять.

```python
def decor(func): # функция принимает функцию
    def wrap():
        print("============")
        func()
        print("============")
    return wrap

def print_my_text():
    print("My text")

noDecorated = print_my_text
noDecorated()
   
decorated = decor(print_my_text)
decorated()
```

Пример присваивания декоратора к функции @

```python
def decor(func): # функция принимает функцию
    def wrap():
        print("============")
        func()
        print("============")
    return wrap

@decor
def print_my_text():
    print("My text")

print_my_text()
```

---

### Рекурсия 

Рекурсия когда функции вызывают сами себя. 

```python
def factorial(x):
    if x == 1:
        return 1
    else: 
        return x * factorial(x-1)

print(factorial(5))
```

---

## Класс

Имя класса с большой буквы

```python
class Cat: # класс Cat
    
    legs = 4 # статический атрибут
    
    # методы - функции внутри класса
    # метод __init__ вызывается когда создаеться экземпляр (объект), где указываются свойства (атрибуты)
    def __init__(self, name, wool_color, eyes_color):
        self.name = name
        self.wool_color = wool_color
        self.eyes_color = eyes_color

    # действия (методы), которые способен совершать класс
    
    # Мурлыкать
    def purr(self):
        print("Муррр!")
    
    # Шипеть
    def hiss(self):
        print("Кот по кличке " + self.name + " сказал: Шшшшшш!")
```

Работа с объектом на основе класса

```python
# Создание объекта
my_cat = Cat("Барсик", "Рыжий", "Зеленые") # новый объект с атрибутами

# Вывод атрибутов
print(my_cat.name) # Барсик
print(my_cat.wool_color) # Рыжий
print(my_cat.eyes_color) # Зеленые
print(my_cat.legs) # 4

# Изменение атрибута объекта
my_cat.wool_color = "Белый"
print(my_cat.wool_color) # Белый

# Обращение к методам класса
my_cat.purr() # Муррр!
my_cat.hiss() # Кот по кличке Барсик сказал: Шшшшшш!
```

---

### Наследование

```python
# Суперкласс 
class Animal: 
    def __init__(self, name, color):
        self.name = name
        self.color = color

# Классы наследники
class Cat(Animal):
    def voice(self):
        print("Муррр!")
        
class Dog(Animal):
    def voice(self):
        print("Гав!")

# Создание объекта        
my_dog = Dog("Шарик", "Черный")
my_cat = Cat("Мурзик", "Белый")

# Обращение к методам класса
my_cat.voice() # Муррр!
my_dog.voice() # Гав!
```

---

## Свой модуль для python

Модулем служит любой файл с расширением .py 

Название модуля с маленькой буквы

Пример наименования файла my_modul.py

Пример объявления переменной в модуле:

```python
a = 351
```

Пример подключения модуля:

```python
import my_modul #импорт модуля находящегося в директории программы 
print(my_modul.a) #обращение к модулю, вывод переменной a
```

```python
import sys #импорт модуля для возможности указания пути 
sys.path.append(r'C:\Путь к каталогу проекта')
import my_modul #импорт модуля по пути
print(my_modul.a) #обращение к модулю, вывод переменной a
```

```python
import my_modul as m #импорт модуля и присваивание ему имени „m”
print(m.a) #обращение к модулю, вывод переменной a
```

```python
from my_modul import a #импорт только переменной a из модуля my_modul (можно через запятую импортировать несколько или указать *, как все)
print(a) 
```